From 0fbb5100e1d17e2af3e7bb1ec84ce9b893262c1e Mon Sep 17 00:00:00 2001
From: Krzysztof Czurylo <krzysztof.czurylo@intel.com>
Date: Sat, 18 Feb 2017 17:17:12 +0100
Subject: [PATCH] jemalloc: fix test compilation on Fedora rawhide

Fixes compilation error in jemalloc tests when using gcc 7.0.x.
---
 src/jemalloc/test/unit/pool.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/jemalloc/test/unit/pool.h b/src/jemalloc/test/unit/pool.h
index eab79753..c584a10a 100644
--- a/src/jemalloc/test/unit/pool.h
+++ b/src/jemalloc/test/unit/pool.h
@@ -224,7 +224,7 @@ TEST_BEGIN(test_pool_check_memory) {
 		pool = pool_create(mem_pool, pool_size, 0);
 		assert_ptr_not_null(pool, "Can not create pool!!!");
 		size_allocated = 0;
-		memset(allocs, 0, TEST_ALLOCS_SIZE);
+		memset(allocs, 0, TEST_ALLOCS_SIZE * sizeof(void *));
 
 		for (i = 0; i < TEST_ALLOCS_SIZE;++i) {
 			allocs[i] = pool_malloc(pool, object_size);
-- 
2.11.1

